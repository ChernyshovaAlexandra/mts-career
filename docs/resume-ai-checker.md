# AI Resume Checker - Проверка резюме с помощью ИИ

## Обзор функциональности

Компонент `AIResumeChecker` предоставляет пользователям возможность загрузить свое резюме и получить персонализированный анализ от искусственного интеллекта. Функциональность интегрирована с API `/api/resume` и включает полную обработку ошибок, состояния загрузки и отображение результатов.

## Техническая реализация

### Основные компоненты

```typescript
interface AIResumeCheckerProps {
  attemptsRemaining: number; // Количество оставшихся попыток
}

interface AnalysisResult {
  summary: string;    // Краткий анализ резюме
  tags: string[];     // Рекомендации по улучшению
}
```

### Состояния компонента

1. **Начальное состояние**: Форма для выбора направления и загрузки файла
2. **Загрузка**: Отображение спиннера и статуса отправки
3. **Результат**: Отображение анализа от ИИ
4. **Ошибка**: Отображение сообщения об ошибке

### API интеграция

```typescript
// Отправка файла на анализ
const response = await apiService.uploadResume(selectedFile);

// Обработка ответа
setAnalysisResult({
  summary: response.data.summary,
  tags: response.data.tags
});
```

## Пользовательский интерфейс

### Форма загрузки

- **Выбор направления**: Dropdown с доступными сферами деятельности
- **Загрузка файла**: Drag & Drop или клик для выбора файла
- **Валидация**: Поддержка только .doc и .docx форматов
- **Кнопка отправки**: Активируется только при заполнении всех полей

### Отображение результатов

- **Краткий анализ**: Текстовое описание сильных и слабых сторон
- **Рекомендации**: Список конкретных советов по улучшению
- **Визуальное оформление**: Четкое разделение на секции

### Обработка ошибок

- **401**: Ошибка авторизации - предложение войти заново
- **429**: Превышение лимита попыток
- **Валидация файлов**: Проверка формата и размера
- **Сетевые ошибки**: Общие сообщения об ошибках

## Доступность (A11y)

### ARIA атрибуты

```typescript
// Основной контейнер
<CheckerContainer role="region" aria-labelledby="ai-checker-heading">

// Форма
<form role="form" aria-label="Форма загрузки резюме для ИИ-проверки">

// Сообщения об ошибках
<ErrorMessage role="alert" aria-live="assertive">

// Статус загрузки
<div role="status" aria-live="polite">
```

### Клавиатурная навигация

- **Tab**: Переход между элементами формы
- **Enter/Space**: Активация кнопок и dropzone
- **Escape**: Закрытие модальных окон (если есть)

### Screen Reader поддержка

- Подробные описания для всех интерактивных элементов
- Статус-сообщения для динамических обновлений
- Альтернативные тексты для иконок и изображений

## Стилизация

### Основные стили

```typescript
// Спиннер загрузки
const spin = keyframes`
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
`;

// Сообщения об ошибках
export const ErrorMessage = styled(Text)`
  background: #FEF2F2;
  border: 1px solid #FECACA;
  color: #DC2626;
`;

// Сообщения об успехе
export const SuccessMessage = styled(Text)`
  background: #F0F9F4;
  border: 1px solid #BBF7D0;
  color: #16A34A;
`;
```

### Адаптивность

- **Desktop**: Двухколоночная компоновка (форма + результаты)
- **Tablet**: Вертикальная компоновка с сохранением размеров
- **Mobile**: Оптимизированные размеры и отступы

## Интеграция с системой

### Авторизация

Компонент автоматически использует токен авторизации из `localStorage` через `apiService`:

```typescript
// Автоматическое добавление токена в заголовки
this.http.interceptors.request.use((config) => {
  const token = ApiService.getAccessToken();
  if (token) {
    config.headers.set("Authorization", `Bearer ${token}`);
  }
  return config;
});
```

### Управление попытками

Система ограничивает количество попыток анализа резюме:

```typescript
// Проверка доступности попыток
if (attemptsRemaining <= 0) {
  setError("У вас закончились попытки для проверки резюме");
  return;
}
```

### Интеграция с другими компонентами

Компонент интегрирован в `ResumePage` как часть образовательного модуля:

```typescript
<ExpandableSection
  id="ai-checker"
  title="Проверка резюме с помощью ИИ"
  isExpanded={expandedSections.includes("ai-checker")}
  onToggle={() => toggleSection("ai-checker")}
  noPaddingTop={true}
>
  <AIResumeChecker attemptsRemaining={3} />
</ExpandableSection>
```

## Тестирование

### Ручное тестирование

1. **Загрузка файла**: Проверить drag & drop и клик
2. **Валидация**: Попробовать загрузить неподдерживаемые форматы
3. **API вызовы**: Проверить отправку файла и обработку ответа
4. **Ошибки**: Симулировать сетевые ошибки и ошибки авторизации

### Автоматизированное тестирование

```typescript
// Пример теста для компонента
describe('AIResumeChecker', () => {
  it('should upload file and display results', async () => {
    // Тест загрузки файла и отображения результатов
  });

  it('should handle API errors gracefully', async () => {
    // Тест обработки ошибок
  });

  it('should validate file format', () => {
    // Тест валидации форматов файлов
  });
});
```

## Безопасность

### Валидация файлов

- Проверка расширения файла (.doc, .docx)
- Ограничение размера файла (если необходимо)
- Сканирование на вредоносное содержимое (на сервере)

### Авторизация

- Обязательная авторизация для доступа к функциональности
- Проверка токена на каждой отправке
- Автоматический редирект при истечении токена

## Производительность

### Оптимизации

- Мемоизация обработчиков событий с `useCallback`
- Ленивая загрузка компонентов
- Оптимизация перерендеров с `memo`

### Мониторинг

- Логирование ошибок в консоль
- Отслеживание времени загрузки
- Мониторинг успешности API вызовов

## Будущие улучшения

### Планируемые функции

1. **Предварительный просмотр**: Отображение содержимого файла перед отправкой
2. **История анализов**: Сохранение предыдущих результатов
3. **Сравнение версий**: Анализ изменений между версиями резюме
4. **Экспорт результатов**: Скачивание отчета в PDF
5. **Интеграция с ATS**: Проверка совместимости с системами отслеживания кандидатов

### Технические улучшения

1. **Кэширование**: Сохранение результатов для повторного просмотра
2. **Прогресс-бар**: Детальное отображение процесса анализа
3. **Офлайн режим**: Базовая валидация без подключения к серверу
4. **WebSocket**: Реальное время обновления статуса анализа 